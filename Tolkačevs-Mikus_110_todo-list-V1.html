<!--Autors:Mikus Tolkačevs
    Versija: pirmā-->
<!DOCTYPE html>
<html lang="lv">
<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
    <title>to do list praktiskais</title>

    <style>
    .card:hover {
        box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);
    }

    .checked {
        text-decoration: line-through;
        color: gray;
        opacity: 0.7;

    }

    .task-text {
    cursor: pointer;
    flex-grow: 1;
}

</style>

</head>
<body class="bg-blue">
<div class="container mt-5">
    <div class="card mx-auto" style="max-width: 670px;">
        <div class="card-body">
            <h3 class="text-center mb-3">Mani darbi</h3>

            <form>
                <div class="control-group">
                    <div class="input-group mb-3">
                        <input type="text" class="form-control" id="teksts" name="teksts" placeholder="Ieraksti darbu...">
                        <button type="button" class="btn btn-primary" onclick="addTask()">Pievienot</button>
                    </div>
                    <ul id="task-list" class="list-group"></ul>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    // local storage dati (Rūdolfs Č.)
    let tasks = JSON.parse(localStorage.getItem("tasks")) || [];

    // ielade uzdevumu no local storage lai tas nepazud (Rūdolfs Č.)
    tasks.forEach(text => {
        createTaskLi(text);
    });

    function addTask() {
        const input = document.getElementById("teksts");
        const text = input.value.trim();

        if (text === "") return;

        createTaskLi(text);

        tasks.push(text);
        localStorage.setItem("tasks", JSON.stringify(tasks));

        input.value = "";
    }

    function createTaskLi(text) {
        const li = document.createElement("li");
        li.className = "list-group-item d-flex justify-content-between align-items-center";

        li.innerHTML = `
            ${text}
            <button class="btn btn-danger btn-sm" onclick="removeTask(this)">Dzēst</button>
        `;

        document.getElementById("task-list").appendChild(li);
    }

    function removeTask(button) {
        const li = button.parentElement;
        const text = li.firstChild.textContent.trim();

        tasks = tasks.filter(task => task !== text);
        localStorage.setItem("tasks", JSON.stringify(tasks));

        li.remove();
}

//Funkcija lai panem tikai darbina tekstu (R.Č.)

function createTaskLi(text) {
    const li = document.createElement("li");
    li.className = "list-group-item d-flex justify-content-between align-items-center";

    li.innerHTML = `
        <span class="task-text">${text}</span>
        <button class="btn btn-danger btn-sm" onclick="removeTask(this)">Dzēst</button>
    `;

    document.getElementById("task-list").appendChild(li);
}

//Izsvitro darbinu kam tikai uzpiests click (R.Č.)
var list = document.getElementById("task-list");

list.addEventListener("click", function (ev) {
    if (ev.target.classList.contains("task-text")) {
        ev.target.classList.toggle("checked");
    }
});

</script>

</body>
</html>
<!--localStorage ir pārlūkprogrammas atmiņa, kurā var saglabāt datus ilgtermiņā lietotāja datorā.
Atšķirībā no const un let, pēc F5 dati nepazūd, bet mainīgie katru reizi tiek izdzēsti, kad lapa tiek atsvaidzināta.
Atšķirībā no parastiem mainīgajiem (let vai const), localStorage saglabā datus arī pēc lapas pārlādes (F5 nospiešanas), tāpēc tajā var glabāt darbu sarakstu, lai tas nepazustu.-->
